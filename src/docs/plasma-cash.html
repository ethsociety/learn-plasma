<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>Plasma Cash | Learn Plasma</title>

    <!-- Styles -->
    <link href="../assets/css/page.min.css" rel="stylesheet">
    <link href="../assets/css/style.css" rel="stylesheet">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="../assets/img/apple-touch-icon.png">
    <link rel="icon" href="../assets/img/favicon.png">
  </head>

  <body data-spy="scroll" data-target=".nav-sidebar" data-offset="100">


    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-stick-dark" data-navbar="sticky">
      <div class="container">

        <div class="navbar-left">
          <button class="navbar-toggler" type="button">&#9776;</button>
          <a class="navbar-brand" href="../index.html">
            <img class="logo-dark" src="../assets/img/logo-dark.png" alt="logo">
            <img class="logo-light" src="../assets/img/logo-light.png" alt="logo">
          </a>
        </div>

        <section class="navbar-mobile">
          <span class="navbar-divider d-mobile-none"></span>

          <ul class="nav nav-navbar">

            <li class="nav-item">
              <a class="nav-link" href="../pages/faq.html">FAQ</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="../docs/intro.html">Learn</a>
            </li>
          </ul>
        </section>

        <a id="contribute-btn" class="btn btn-sm btn-round btn-success" href="https://github.com/ethsociety/plasma-website">Contribute <i class="fa fa-github"></i></a>

      </div>
    </nav><!-- /.navbar -->


    <!-- Header -->
    <header class="header" style="background-color: #f1f6fa">
      <div class="container">
        <h1>Plasma Cash</h1>
        <p class="lead">Documentation and examples for Plasma, including its design principles, security considerations, use cases, and more.</p>
      </div>
    </header><!-- /.header -->


    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <div class="row">


          <!--
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          | Sidebar
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          !-->
          <div class="col-md-4 col-xl-3">
            <aside class="sidebar sidebar-expand-md sidebar-sticky pr-md-4 br-1">
              <div class="sidebar-body">
                <ul class="nav nav-sidebar nav-sidebar-hero nav-sidebar-pill">
                  <li class="nav-item">
                    <a class="nav-link" href="../docs/intro.html">Introduction <i class="nav-angle"></i></a>
                    <div class="nav">
                      <a class="nav-link" href="../docs/intro.html#motivation">Motivation</a>
                      <a class="nav-link" href="../docs/intro.html#goals">Design goals</a>
                      <a class="nav-link" href="../docs/intro.html#challenges">Challenge period</a>
                      <a class="nav-link" href="../docs/intro.html#exits">Exit strategies</a>
                      <a class="nav-link" href="../docs/intro.html#implementations">Implementations</a>
                    </div>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/plasma-mvp.html">Plasma MVP <i class="nav-angle"></i></a>
                    <div class="nav">
                      <a class="nav-link" href="../docs/plasma-mvp.html#mvp-overview">Overview</a>
                      <a class="nav-link" href="../docs/plasma-mvp.html#mvp-architecture">Architecture</a>
                      <a class="nav-link" href="../docs/plasma-mvp.html#mvp-cli">CLI Documentation</a>
                    </div>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="#">Plasma Cash <i class="nav-angle"></i></a>
                    <div class="nav">
                      <a class="nav-link" href="#background">Motivation</a>
                      <a class="nav-link" href="#non-fungibility">Non-fungibility</a>
                      <a class="nav-link" href="#data-structure">Data structure</a>
                      <a class="nav-link" href="#validation">Validation</a>
                      <a class="nav-link" href="#pros-and-cons">Pros and Cons</a>
                    </div>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/security.html">Security Analysis <i class="nav-angle"></i></a>
                    <div class="nav">
                      <a class="nav-link" href="../docs/security.html#pitfalls">Pitfalls</a>
                      <a class="nav-link" href="../docs/security.html#recommendations">Recommendations</a>
                      <a class="nav-link" href="../docs/security.html#trade-offs">Trade-offs</a>
                    </div>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/developers.html">Plasma for Developers <i class="nav-angle"></i></a>
                    <div class="nav">
                      <a class="nav-link" href="../docs/developers.html#motivation">Motivation</a>
                      <a class="nav-link" href="../docs/developers.html#samplecode">Sample code</a>
                      <a class="nav-link" href="../docs/developers.html#bugreports">Bug reporting</a>
                    </div>
                  </li>
                </ul>
              </div>
            </aside>
          </div>


          <!--
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          | Plasma Cash
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          !-->
          <div class="col-md-7 col-xl-8 ml-md-auto py-8">
            <h2 id="plasma-cash">Plasma Cash</h2>
            <p class="lead-2">Plasma Cash is a Plasma implementation that allows for non-fungible tokens using Sparse Merkle Trees.</p>

            <hr class="hr-dash my-7">

            <h3 id="background">Motivation - Operator's Incentive</h3>

            <p><span>In Plasma MVP, all tokens deposited can be considered as fungible tokens. An exit relies on a user&rsquo;s ability to claim and verify a certain amount of the funds in the shared pool. This results in a scenario where an operator might be able to create &ldquo;out of nowhere&rdquo; transactions that do not stem from a valid deposit in the root chain contract. </span></p>

            <p><span>The operator would then intentionally withhold these blocks where invalid transactions exist. </span></p>

            <p><span>In Plasma MVP, all tokens deposited are fungible and stored in a shared pool on the root chain contract. An exit relies on a user&rsquo;s ability to claim and verify a certain amount of funds and for this claim to be resilient against challenges.</span></p>

            <p><span>This creates a scenario where an operator can create &ldquo;out of nowhere&rdquo; transactions which are basically transactions that do not stem from a valid deposit in the root chain contract. What the operator can do is to re-send these transactions back to themselves as many times as possible and store all these transactions into a block. This particular block is then committed to the root chain but not broadcast on the Plasma chain. </span></p>

            <p><span>In doing so, it becomes impossible for other participants to challenge the validity of the exit transaction for two reasons:</span></p>

            <ol>
              <li><span>The participants cannot find the invalid &ldquo;out of nowhere&rdquo; transaction since it was withheld by the operator. To challenge, they have to ask the operator to show proof of the entire transaction history. </span></li>
              <li><span>However, the total transaction history proof is too large for the operator to be able to show on the root chain. Ethereum has a 1MB limit on block size. So they can get away with not revealing the invalid transaction.</span></li>
            </ol>

            <p><span>This allows the operator to create &ldquo;out-of-nowhere&rdquo; transactions with which they can successfully exit and drain the funds out of the smart contract on the root chain.</span></p>

            <hr class="hr-dash my-7">

            <h3 id="non-fungibility">Non-fungibility</h3>
            <p><span>Plasma Cash was designed to give the operator as little incentive as possible to cheat or game the system. Every token in the Plasma Chain is indexed and linked to a corresponding deposit on the Root Chain.</span></p>

            <p><br /><span>If the operator tries to create invalid transactions and exit from those transactions, the operator can easily be challenged because all tokens are non-fungible and their transaction history can easily be traced. It is also not possible for the operator to withdraw all the funds in one go as they have to make separate exits for every token. The operator then loses all bonds staked on these exits, which is of substantial cost to the malicious operator.</span></p>

            <img src="../assets/img/plasma-cash/operator-invalid-transactions.jpg">
                  <hr class="hr-dash my-7">

            <h3 id="data-structure">Data Structure</h3>

            <p><span>Each block holds the state of every single token in a data structure known as a Sparse Merkle Tree (SMT). Each token is permanently assigned to a leaf node in the tree and the tree just has to keep track of the owner of each token. This is advantageous for a few reasons: </span></p>

            <ol>
              <li><span>Default values for each layer of the tree can be pre-calculated. Layer 0 would be H(0), Layer 1 would be H((H0), H(0)), Layer 2 would be H(H(H(0), H(0)), H(H(0), H(0))) and so forth. This saves on processing time and power needed for the computations. Each client only needs to save data for the tokens it currently owns.</span></li>

              <li><span>Verification of a transaction only requires looking at the index of the token in the tree. Only the history of the token transaction being verified has to be considered.</span></li>
              <li><span>When a token is spent, it is guaranteed that there is only one transaction in the SMT.</span></li>
            </ol>

            <img src="../assets/img/plasma-cash/overview.jpg" style="max-height:500px">

            <hr class="hr-dash my-7">

            <h3 id="validation">Validation</h3>

            <p><span>When a transaction is made, the clients verify that transaction by checking that the token has been properly transferred since its initial deposit. Proofs from every block since the initial deposit of the token must be shown. In a block, the token is either spent in a transaction or unspent. </span></p>

            <p><span>If the token was not spent in a block, proofs of non-inclusion must be given and this can be done simply by giving a Merkle proof that no transaction took place at that index in the SMT for that particular block. If it was indeed spent, a Merkle proof of the transaction must be given to show that the proper transfer of ownership did take place.</span></p>

            <img src="../assets/img/plasma-cash/validation.jpg"

            <hr class="hr-dash my-7">

            <h3 id="pros-and-cons">Pros and Cons</h3>
            <p><span>Since proofs of the token&rsquo;s activity must be shown for every single block from its deposit to the current block, this results in massive overhead when the Plasma Chain has progressed to a significant amount of blocks. Let&rsquo;s do a quick calculation: </span></p>

            <p><span>Let&rsquo;s use a conservative estimate for the number of coins. Assume we have 2^10 tokens for the Plasma Chain. This results in a SMT of height 10 for which we will require 10 branch hashes.</span></p>

            <p><span>1 hash = 32 bytes</span></p>

            <p><span>Size of Merkle Tree = 32bytes * 10 = 320 bytes</span></p>

            <p><span>This results in 320 bytes per block.</span></p>

            <p><span>If one block is produced every 15 seconds, that results in 3.154 million blocks per year.</span></p>

            <p><span>320bytes*3.154million blocks/year = 1.01GB/year</span></p>

            <p><span>This results in 1.01GB/year transfer of proof and this increases as number of tokens increase.</span></p>

            <p><span>There is a trade-off between flexibility and fungibility. In Plasma Cash, tokens have to be spent in the exact denomination that they were created in. There is no way to spend less than or a fraction of a specific token in a transaction. This is extremely unsuitable for use cases such as exchanges. There may be certain ways to manage splitting and merging the tokens but these are all highly theoretical and still in discussion.</span></p>

            <p><span>Having non-fungible tokens make Plasma Cash a perfect use case for supply-chain logistics. Each individual part or piece can be tracked as a token. The bulk of the work happens off-chain so the supply chain benefits from the high throughput of the Plasma Chain while the root hashes posted to the Root Chain ensure that the supply chain receives the full security guarantee of Ethereum.</span></p>


          </div>

        </div>
      </div>
    </main><!-- /.main-content -->


   <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row gap-y align-items-center">

          <div class="col-md-9">
            <div class="nav justify-content-center justify-content-md-start">
              <a class="nav-link" href="http://www.initc3.org/">Made with ❤️at IC3 Bootcamp</a>
            </div>
          </div>

          <div class="col-md-3 text-center text-md-right">
            © Learn Plasma
          </div>
        </div>
      </div>
    </footer><!-- /.footer -->


    <!-- Scripts -->
    <script src="../assets/js/page.min.js"></script>
    <script src="../assets/js/script.js"></script>

  </body>
</html>
