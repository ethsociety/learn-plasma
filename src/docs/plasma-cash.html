<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>Plasma Cash | Learn Plasma</title>

    <!-- Styles -->
    <link href="../assets/css/page.min.css" rel="stylesheet">
    <link href="../assets/css/style.css" rel="stylesheet">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="../assets/img/apple-touch-icon.png">
    <link rel="icon" href="../assets/img/favicon.png">
  </head>

  <body data-spy="scroll" data-target=".nav-sidebar" data-offset="100">

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-stick-dark" data-navbar="sticky">
      <div class="container">

        <div class="navbar-left">
          <button class="navbar-toggler" type="button">&#9776;</button>
          <a class="navbar-brand" href="../index.html">
            <img class="logo-dark" src="../assets/img/logo-dark.png" alt="logo">
            <img class="logo-light" src="../assets/img/logo-light.png" alt="logo">
          </a>
        </div>

        <section class="navbar-mobile">
          <span class="navbar-divider d-mobile-none"></span>

          <ul class="nav nav-navbar">
            <li class="nav-item">
              <a class="nav-link" href="../pages/faq.html">FAQ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../docs/intro.html">Learn</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pages/build.html">Build</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pages/research.html">Research</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pages/misc.html">Misc</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pages/contact.html">Contact</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pages/contributors.html">Contributors</a>
            </li>

            <span id="sidebar-mobile">
              <li class="nav-item">
                <a class="nav-link" href="../docs/intro.html">Introduction</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="../docs/plasma-framework.html">The Plasma Framework</a>
              </li>

               <li class="nav-item">
                <a class="nav-link" href="../docs/annotations.html">Annotations</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="../docs/plasma-mvp.html">Plasma MVP</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="#">Plasma Cash <i class="nav-angle rotate"></i></a>
                <div class="nav" style="display:block;">
                  <a class="nav-link" href="#background">Motivation</a>
                  <a class="nav-link" href="#non-fungibility">Non-fungibility</a>
                  <a class="nav-link" href="#data-structure">Data structure</a>
                  <a class="nav-link" href="#validation">Validation</a>
                  <a class="nav-link" href="#pros-and-cons">Pros and Cons</a>
                </div>
              </li>

              <li class="nav-item">
                <a class="nav-link" href="../docs/plasma-debit.html">Plasma Debit</a>
              </li>
            </span>
          </ul>
        </section>

        <a id="contribute-btn" class="btn btn-sm btn-round btn-success" href="https://github.com/ethsociety/plasma-website">Contribute <i class="fa fa-github"></i></a>

      </div>
    </nav><!-- /.navbar -->


    <!-- Header -->
    <header class="header" style="background-color: #f1f6fa">
      <div class="container">
        <h1>Plasma Cash</h1>
        <p class="lead">Understand how Plasma Cash works and when to use it.</p>
      </div>
    </header><!-- /.header -->


    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <div class="row">


          <!--
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          | Sidebar
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          !-->
          <div class="col-md-4 col-xl-3">
            <aside class="sidebar sidebar-expand-md sidebar-sticky pr-md-4 br-1">
              <div class="sidebar-body">
                <ul class="nav nav-sidebar nav-sidebar-hero nav-sidebar-pill">
                  <li class="nav-item">
                    <a class="nav-link" href="../docs/intro.html">Introduction</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/plasma-framework.html">The Plasma Framework</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/annotations.html">Annotations</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/plasma-mvp.html">Plasma MVP</a>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="#">Plasma Cash <i class="nav-angle rotate"></i></a>
                    <div class="nav" style="display:block;">
                      <a class="nav-link" href="#consensus">Consensus</a>
                      <a class="nav-link" href="#deposits">Deposits</a>
                      <a class="nav-link" href="#blocks">Blocks</a>
                      <a class="nav-link" href="#transactions">Transactions</a>
                      <a class="nav-link" href="#withdrawals">Withdrawals</a>
                      <a class="nav-link" href="#pros-and-cons">Pros and Cons</a>
                    </div>
                  </li>

                  <li class="nav-item">
                    <a class="nav-link" href="../docs/plasma-debit.html">Plasma Debit</a>
                  </li>
                </ul>
              </div>
            </aside>
          </div>


          <!--
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          | Plasma Cash
          |‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒‒
          !-->
          <div class="col-md-7 col-xl-8 ml-md-auto py-8">
            <h2 id="plasma-cash">Plasma Cash</h2>
            <p>
              <a href="https://ethresear.ch/t/plasma-cash-plasma-with-much-less-per-user-data-checking/1298">Plasma Cash</a> is a Plasma implementation primarily built for storing and transferring non-fungible tokens.
              Plasma Cash was originally designed to address the mass exit problem in Plasma MVP.
            </p>

            <hr class="hr-dash my-7">

            <h3 id="consensus">Consensus</h3>
            <p>
              Plasma Cash chains, like Plasma MVP chains, need a consensus mechanism.
              This mechanism can be anything from a single operator (Proof-of-Authority) to a large set of validators (Proof-of-Stake).
              The design of Plasma Cash ensures that user funds are always safe, even if the consensus mechanism misbehaves.
            </p>

            <h3 id="deposits">Deposits</h3>
            <p>
              Users can start using a Plasma Cash chain by depositing assets into the chain's smart contract.
              However, unlike Plasma MVP, each Plasma Cash asset is represented by a non-fungible token.
              For example, if a user deposits 10 ETH into the contract, that user will receive a token worth 10 ETH.
              Each token is given a unique identifier.
            </p>

            <h3 id="blocks">Blocks</h3>
            <p>
              Plasma Cash blocks are very different from Plasma MVP blocks.
              Each Plasma Cash block has a slot for every token in existence.
              Whenever a token is spent, a record of that transaction is placed at the corresponding slot.
              Here's what that would look like for a Plasma Cash chain with four tokens.
            </p>
            <div class="text-center">
              <img src="../assets/img/plasma-cash/pc-block.png">
            </div>
            <p>
              In this example, token <b>#4</b> was sent from user <b>A</b> to user <b>B</b>.
              Notice that <b>#1</b>, <b>#2</b>, and <b>#3</b> weren't spent, so we didn't put anything in those slots!
              This special structure gives us something really cool.
              In addition to being able to show that a token was spent in a specific block, we can also show that the token <i>didn't</i> change hands in that block.
            </p>
            <p>
              So whereas Plasma MVP blocks form standard <a href="https://en.wikipedia.org/wiki/Merkle_tree">Merkle trees</a>, Plasma Cash blocks form <i>sparse</i> Merkle trees.
              Standard Merkle trees don't give us a good way to prove that something <i>isn't</i> part of a specific block, but sparse Merkle trees do!
              You can read more about sparse Merkle trees <a href="https://medium.com/@kelvinfichter/whats-a-sparse-merkle-tree-acda70aeb837">here</a>.
            </p>
            <p>
              What's cool about this is that users don't actually need to keep track of every single token!
              Transactions of one token can never be placed into the slot of another token.
              Users only need to keep track of their own tokens - it doesn't even matter what's in the other slots.
            </p>

            <h3 id="transactions">Transactions</h3>
            <p>
              Since users are only keeping track of their own tokens, they don't know who owns any of the other tokens.
              When a user wants to send their token to another user, they need to prove that they actually own that token!
              This proof consists of the full transaction history of the token - every transaction since the token was first created.
              If the history is correct, then it should show the list of owners ending with the sender.
            </p>
            <p>
              To prove that history is actualyl correct, the user needs to provide additional proof that each transaction in the history was correctly included in a block.
              Additionally, to show that there aren't any missing transactions, the user also needs to provide a proof that the token <i>wasn't</i> spent in any other block.
              Let's demonstrate this by looking at a few Plasma Cash blocks.
            </p>
            <div class="text-center">
              <img src="../assets/img/plasma-cash/pc-tx.png">
            </div>
            <p>
              By the end of these four blocks, <b>G</b> owns token <b>#2</b>, and <b>C</b> owns token <b>#4</b>.
              So how does <b>G</b> prove that they actually own <b>#2</b>? Simple!
              <b>G</b> just needs to prove that <b>#2</b> wasn't spent in blocks #1 and #3, and that it was transferred from <b>E</b> to <b>F</b> in block #2 and from <b>F</b> to <b>G</b> in block #4.
              <b>G</b> can do this with a simple Merkle proof for each block (taking advantage of the special sparse Merkle tree construction).
            </p>
            <p>
              Similarly, <b>C</b> can prove that they own <b>#4</b> by showing that the token wasn't spent in blocks #2 and #4, and showing that it was sent from <b>A</b> to <b>B</b> and then <b>B</b> to <b>C</b>.
            </p>

            <h3 id="withdrawals">Withdrawals</h3>
            <p>
              Because the block structure of Plasma Cash differs so much from Plasma MVP, the process of withdrawing funds differs too.
            </p>
            <h4 id="starting-exit">Starting an Exit</h4>
            <p>
              When a user wants to withdraw a token, they need to submit the two latest transactions in the token's history.
              For example, if <b>C</b> wants to withdraw token <b>#4</b>, they need to provide the "child" (most recent) transaction from <b>B</b> to <b>C</b>, and the "parent" transaction from <b>A</b> to <b>B</b>.
              The user also needs to submit Merkle proofs that show both transactions were included in the blockchain.
            </p>
            <h4 id="challenging-exit">Challenging an Exit</h4>
            <p>
              We need to support three types of challenges to ensure that only the true owner of a token can withdraw that token.
              Withdrawals can be immediately blocked if someone proves that the withdrawing user actually spent the token later on.
              Withdrawals can also be immediately blocked if someone shows that there's transaction <i>between</i> the parent and the child transactions, meaning the withdrawing user provided an invalid parent.
            </p>
            <p>
              Someone can also challenge the withdrawal by providing some other transaction in the token's history.
              This type of challenge doesn't immediately block a withdrawal.
              Instead, the withdrawing user is forced to respond with the transaction that comes after the provided transaction.
            </p>

            <h3 id="pros-and-cons">Pros and Cons</h3>
            <p>
              Plasma Cash is highly scalable because users only ever need to keep track of their own tokens.
              However, there's is a trade-off being made between scalability and flexibility.
              Tokens always have a fixed denomination - there's (currently) no good way to spend a fraction of a token without going into something like Plasma Debit (which we'll discuss in the next section).
              This makes Plasma Cash unsuitable for use cases where fractions of tokens are necessary, like exchanges.
            </p>
            <p>
              Additionally, the proofs that need to be sent along with each transaction can grow pretty quickly.
              These proofs need to go all the way back to the block in which the token was deposited.
              Once the Plasma Chain has been running for a while, these proofs might get prohibitively large.
            </p>
            <p>
              Let's do a quick calculation:
            </p>
            <p>
              Imagine we have a Plasma Cash chain with a (very) conservative 1000 tokens.
              This results in a sparse Merkle tree with ten levels, which means each Merkle proof needs to provide ten sibling hashes.
              Every sibling hash is 32 bytes, so each Merkle proof is $32 * 10 = 320$ bytes!
            <p>
            <p>
              Now let's imagine this chain is producing one block every 15 seconds (the current Ethereum block time).
              That's $4 * 60 * 24 * 365 = 2102400$ blocks a year.
            </p>
            <p>
              We know that the proof to send a single token grows by 320 bytes per block.
              After a year, that proof would grow to $320 * 2102400 = 672768000$ bytes, or <b>0.67</b> gigabytes!
              That's already way too much to be transmitted in a reasonable amount of time over even home networks.
            </p>
            <p>
              Plasma Cash is still great for certain things.
              Support for non-fungible tokens makes Plasma Cash perfect for things like supply-chain logistics or even <a href="https://www.kickstarter.com/projects/328862817/zombie-battleground-the-new-generation-of-ccg-tcg">card games</a>!
            </p>

            <a class="btn btn-lg btn-round btn-info float-right" href="./plasma-debit.html">Next: Plasma Debit</a>
          </div>
        </div>
      </div>
    </main><!-- /.main-content -->


   <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row gap-y align-items-center">

          <div class="col-md-9">
            <div class="nav justify-content-center justify-content-md-start">
              <a class="nav-link" href="http://www.initc3.org/">Made with ❤️at IC3 Bootcamp</a>
            </div>
          </div>

          <div class="col-md-3 text-center text-md-right">
            © Learn Plasma
          </div>
        </div>
      </div>
    </footer><!-- /.footer -->


    <!-- Scripts -->
    <script src="../assets/js/page.min.js"></script>
    <script src="../assets/js/script.js"></script>

    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']]
        }
      });
    </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  </body>
</html>
